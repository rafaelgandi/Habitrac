<!DOCTYPE html>
<!-- LM: 11-20-12 -->
<html lang="en">
<head>
	<meta charset="utf-8">
	<!-- See: http://debugfix.com/2011/11/android-browser-css-position-fixed-bug-solved/ -->
	<meta name="viewport" content="width=100%, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
	<title>Habitrac</title>  
	<link rel="stylesheet" href="css/Mui.css">
	<link rel="stylesheet" href="css/habitrac.css">
	<link rel="stylesheet" href="css/mobiscroll-2.1.custom.min.css">	
</head>
<body class="habitrac">
<header id="mui_header" class="glow">
	<h1></h1>	
	<span id="mui_header_side_button_con"></span>
</header>

<section id="habit_list_page" class="mui_page mui_active_page">
	<ul id="habit_list" class="mui_listview"></ul>
</section>
<section id="new_habit_page" class="mui_page"></section>
<section id="edit_habit_page" class="mui_page"></section>
<section id="chart_page" class="mui_page">
	<div id="pie_con" class="glow"></div>	
</section>
<section id="menu_page" class="mui_page">
	<ul id="app_menu_list" class="mui_listview"></ul>
</section>
<section id="about_page" class="mui_page"></section>

<section id="habitrac_menu_popup_con" class="glow trans hide">
	<ul id="habitrac_menu_list" class="mui_listview"></ul>
</section>
<div id="notification"><span  class="glow">---</span></div>
<script>!window.PhoneGap && document.write("<script src='phonegap.js'>\x3C/script>");</script>
<script src="js/lib/zepto.min.js"></script>
<script src="js/lib/Mui.js"></script>
<script src="js/lib/LAB.min.js"></script>
<script src="js/Habitrac.Startups.js"></script>
<script>
var lab = $LAB,
	z = Zepto;	
lab.setGlobalDefaults({ 
	CacheBust: true,
	Debug: true	
});	
document.addEventListener('deviceready', function () {
	var cb = (new Date()).getTime();
	lab
	.script('js/Habitrac.js?_'+cb)
	.script('js/Habitrac.Storage.js?_'+cb)
	.wait(function () {
		lab.script('js/lib/Util.js?_'+cb)
		.script('js/Habitrac.Builder.js?_'+cb).wait(function () {
			lab.script('js/Habitrac.Logic.js?_'+cb).wait(function () {				
				Habitrac.Builder.ajaxTemplate('menu_page.html', function (html) {
					Util.getElementFromCache('#app_menu_list').html(html);
				});
				Habitrac.Builder.ajaxTemplate('about_page.html', function (html) {
					Util.getElementFromCache('#about_page').html(html);
				});
				Habitrac.Logic.buildHabitList();			
				lab.script('js/Habitrac.Events.js?_'+cb);
			});	
			// Start building the markup of some of the pages here //
			Habitrac.Builder.ajaxTemplate('chart_page.html', function (html) {
				Util.getElementFromCache('#pie_con').html(html);
			});
			Habitrac.Builder.ajaxTemplate('new_habit_page.html', function (html) {
				Util.getElementFromCache('#new_habit_page').html(html);
			});
			Habitrac.Builder.ajaxTemplate('edit_habit_page.html', function (html) {
				Util.getElementFromCache('#edit_habit_page').html(html);
			});
		});
	});
}, true);
</script>

<script type="text/html" id="habit_list_tpl">
	<li data-habitid="{habit_id}"> 
		<span class="habit_label" data-habitid="{habit_id}">{habit}</span>
		<div>
			<button data-habitid="{habit_id}" class="failed_button" data-hlightclass="fail_press">Failed</button>
			<button data-habitid="{habit_id}" class="didit_button" data-hlightclass="didit_press">Did It!</button>				
		</div>
	</li>
</script>
</body></html>